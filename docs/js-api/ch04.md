# 4. 游戏资产 OTC 设计简述

## 4.1 简易 OTC 设计思路

![图 4-1-1 OTC 交易流程图](./transaction-flow.png)

<p align="center">图 4-1-1 OTC 交易流程图</p>

道具交易市场与链上游戏统一使用链上开放的交互接口，其中基础功能，如查询、读取区块数据等可以直接连接节点
进行，但 OTC 的交易撮合部分功能则需要服务器进行辅助撮合。

**在初期阶段，建议不在 OTC 中设计自动撮合过程，而是由买家手动选择某个卖单来执行成交。**

下文是道具交易市场的基本流程设计，基本流程如图 4-1-1 所示。

1.  用户授权登录:

    用户进入交易市场登录引导，绑定现有账户或者创建新账户，进入道具交易市场;

2.  读取当前 OTC 交易市场已支持的游戏数据内容:

    为了提供最佳的兼容性和可定制特性，链上不会对具体封装的游戏数据进行解析或作出结构要求，以便游戏厂商更灵 活的设计自己的链上游戏存储结构，这些游戏数字自查可通过游戏客户端以及资产市场解析，为游戏内容的丰富化提 供强有力的支撑;

3.  游戏道具挂单和售卖:

    玩家用户可选择将自己的道具以挂单方式挂入交易市场，符合买卖价格的买单和卖单将被系统自动撮合，交易内容不
    局限于游戏内货币，也涵盖道具、装备、游戏数据等。
    完成挂单后，交易市场调用链上数据操作接口，修改用户拥有的游戏道具的数据，并在交易市场中心服务器上生成挂 卖信息(出售人、价格、装备等等)。

4.  游戏内容变更:

    当交易订单完成，即游戏内容买入动作顺利完成时，则 OTC 游戏市场调用游戏数据内容购买接口，向出售方支付代
    币，同时更新自身链上游戏数据，完成游戏内容数据的交付，动作完成后 OTC 交易市场修改挂单信息状态为已完成。
